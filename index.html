<!DOCTYPE html>
<html lang="zh">
<head>
    <meta name='description' content='Gordio 星河间 的小站 个人主页 Furry 开发者'>
    <meta name="msvali
    date.01" content="68938FE81F6738C730E658E9F3897ECE" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gordio 的小站</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        html {
            scroll-behavior: smooth;
            touch-action: pan-x pan-y;
        }

       body {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            min-height: 100vh;
            background-image: url('https://bing.img.run/uhd.php');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #e8eaf6;
            overflow-x: hidden;
        }

        

        /* 液态玻璃效果 SVG 滤镜 */
        .liquid-glass-filter {
            position: fixed;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            pointer-events: none;
            z-index: -1;
        }
body.light-mode .liquid-glass {
    background: rgba(100, 100, 100, 0.4);
    backdrop-filter: url(#liquid-glass-filter) blur(10px) contrast(1.2) brightness(0.95) saturate(1.1);
}
        /* 液态玻璃效果基础样式 */
        .liquid-glass {
            backdrop-filter: url(#liquid-glass-filter) blur(10px) contrast(1.2) brightness(1.05) saturate(1.1);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2), 0 -10px 25px inset rgba(0, 0, 0, 0.15);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        glass {
            background: rgba(255, 255, 255, 0.6);
        }

        /* 加载屏 */
        .loading-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loader {
            border: 5px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 5px solid #ffffff;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 启动页 */
        .intro-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9998;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .typing-effect {
            font-size: 24px;
            color: white;
            text-align: center;
            max-width: 80%;
            word-wrap: break-word;
        }

        .cursor {
            display: inline-block;
            width: 2px;
            height: 24px;
            background-color: white;
            margin-left: 2px;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* 滚动指示器 */
        .scroll-indicator {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 50px;
            border: 2px solid white;
            border-radius: 15px;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .scroll-indicator::before {
            content: "";
            position: absolute;
            top: 8px;
            left: 50%;
            width: 6px;
            height: 6px;
            background-color: white;
            border-radius: 50%;
            transform: translateX(-50%);
            animation: scrollDown 1.5s infinite;
        }

        @keyframes scrollDown {
            0% { top: 8px; opacity: 1; }
            100% { top: 32px; opacity: 0; }
        }

        /* 顶部栏 */
        .header-bar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            transform: translateY(0);
            transition: transform 0.5s ease;
        }

        .header-bar.hidden {
            transform: translateY(-100%);
        }

        .header-name {
            font-size: 18px;
            font-weight: bold;
        }

        .header-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        /* 主题切换按钮 */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            font-size: 24px;
            cursor: pointer;
            z-index: 101;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .theme-toggle:hover {
            transform: scale(1.1);
        }

        .theme-toggle:active {
            transform: scale(0.95);
        }

        /* 侧边栏按钮 */
        .sidebar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            font-size: 24px;
            cursor: pointer;
            z-index: 101;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .sidebar-toggle:hover {
            transform: scale(1.1);
        }

        /* 侧边栏 */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 300px;
            height: 100%;
            z-index: 200;
            transform: translateX(-100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
        }

        .sidebar.open {
            transform: translateX(0);
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 199;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
        }

        .sidebar-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        .sidebar-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            color: white;
            transition: all 0.3s ease;
        }

        .sidebar-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .sidebar-oc-image {
            width: 100%;
            height: auto;
            border-radius: 15px 15px 0 0;
        }

        .sidebar-section {
            padding: 20px;
            border-bottom: 1px solid;
            border-image: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent) 1;
        }

        .sidebar-user-info {
            text-align: center;
        }

        .sidebar-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin-bottom: 10px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .sidebar-avatar:hover {
            transform: scale(1.1);
        }

        .sidebar-username {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .sidebar-bio {
            font-size: 14px;
            opacity: 0.8;
            line-height: 1.6;
        }

        .sidebar-timeline {
            max-height: 400px;
            overflow-y: auto;
        }

        .timeline-item {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            padding-left: 15px;
            border-left: 2px solid rgba(255, 255, 255, 0.3);
        }

        .timeline-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .timeline-content {
            flex: 1;
        }

        .timeline-action {
            font-size: 14px;
            margin-bottom: 5px;
        }

        .timeline-time {
            font-size: 12px;
            opacity: 0.6;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .social-icon:hover {
            transform: scale(1.2) rotate(360deg);
            filter: brightness(1.2);
        }

        /* 侧边栏菜单项 */
        .sidebar-menu-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .sidebar-menu-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .sidebar-menu-item i {
            font-size: 20px;
            width: 30px;
        }

        /* 主内容 */
        .main-content {
            width: 100%;
            min-height: 100vh;
            transition: transform 0.5s ease;
            transform: translateY(100%);
            padding-top: 60px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            padding: 20px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
        }

        /* 玻璃卡片 */
        .glass-card {
            border-radius: 15px;
            padding: 20px;
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.5s ease forwards;
        }

        .glass-card:hover {
            transform: translateY(-8px) scale(1.02);
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* 时间与一言 */
        .time-container {
            text-align: center;
            margin: 30px 0;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .time-container.enlarged {
            transform: scale(1.2);
        }

        .time {
            font-size: 3em;
            font-weight: 300;
            margin-bottom: 10px;
        }

        .date {
            font-size: 1.2em;
            opacity: 0.8;
        }

        .quote {
            text-align: center;
            font-size: 1.2em;
            font-style: italic;
            max-width: 800px;
            width: 100%;
            animation-delay: 0.1s;
        }

       /* 用户信息 */
.user-info-container {
    display: flex;
    align-items: center;
    gap: 20px;
    width: 100%;
    max-width: 800px;
    animation-delay: 0.2s;
    position: relative;
}

.user-info-container.auto-hide {
    animation: slideToSidebarAuto 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    animation-delay: 0s;
}

@keyframes slideToSidebarAuto {
    0% {
        opacity: 1;
        transform: translateX(0) scale(1);
    }
    50% {
        transform: translateX(-200px) scale(0.95);
    }
    100% {
        opacity: 0;
        transform: translateX(-120vw) scale(0.8);
        pointer-events: none;
    }
}

        .avatar-container {
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
        }

        .avatar-container:hover .avatar {
            transform: scale(1.1);
        }

        .user-text-info {
            flex: 1;
        }

        .nickname {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 5px;
            cursor: pointer;
        }

        .old-version-label {
            font-size: 0.8em;
            color: #b0b8d4;
            margin-left: 5px;
        }

        .bio-preview {
            font-size: 0.9em;
            opacity: 0.8;
            line-height: 1.6;
        }

        .version-switch-hint {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8em;
            opacity: 0.6;
            white-space: nowrap;
            animation: fadeOut 2s ease forwards;
        }

        @keyframes fadeOut {
            0% { opacity: 0.6; }
            80% { opacity: 0.6; }
            100% { opacity: 0; }
        }

        /* GitHub 仓库和项目 */
        .section-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .repos-container {
            width: 100%;
            display: flex;
            gap: 15px;
            overflow-x: auto;
            overflow-y: hidden;
            padding-bottom: 10px;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
        }

        .repos-container::-webkit-scrollbar {
            height: 8px;
        }

        .repos-container::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .repos-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
        }

        .repos-container::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .projects-container,
        .notes-container {
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            animation-delay: 0.3s;
        }

        .repo-card,
        .project-card,
        .note-card {
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            gap: 10px;
            min-width: 280px;
            flex-shrink: 0;
        }

        .repo-card:hover,
        .project-card:hover,
        .note-card:hover {
            transform: translateY(-8px) scale(1.02);
        }

        .repo-card:active,
        .project-card:active,
        .note-card:active {
            transform: scale(0.98);
        }

        .repo-header,
        .project-header,
        .note-header {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .repo-icon,
        .project-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
        }

        .repo-name,
        .project-name,
        .note-title {
            font-size: 1.2em;
            font-weight: bold;
        }

        .repo-description,
        .note-preview {
            font-size: 0.9em;
            opacity: 0.8;
            line-height: 1.6;
        }

        .repo-stats {
            display: flex;
            gap: 15px;
            font-size: 0.9em;
        }

        .note-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 10px;
        }

        .note-date {
            font-size: 0.8em;
            opacity: 0.6;
            text-align: right;
        }

        /* 加载骨架屏 */
        .skeleton {
            background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
            border-radius: 10px;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .skeleton-card {
            height: 120px;
            margin-bottom: 15px;
            min-width: 280px;
            flex-shrink: 0;
        }

        /* 错误提示 */
        .error-message {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.5);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            color: #ff6b6b;
        }

        /* 模态框 */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            border-radius: 15px;
            padding: 30px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            transform: scale(0.8);
            transition: transform 0.3s ease;
        }

        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            color: white;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .modal-title {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .modal-image {
            width: 100%;
            max-width: 500px;
            height: auto;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .modal-text {
            font-size: 1.1em;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .modal-date {
            font-size: 0.9em;
            opacity: 0.6;
            text-align: right;
        }

        /* 全部列表样式 */
        .all-items-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* 音频控件 */
        .music-control {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .music-control.collapsed {
            left: 3px;
        }

        .play-pause-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            border-radius: 15px;
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .music-control.collapsed .play-pause-btn {
            padding: 12px;
            border-radius: 50%;
            width: 40px;
            height: 40px;
        }

        .play-pause-btn:hover {
            transform: scale(1.05);
        }

        .play-pause-btn:active {
            transform: scale(0.95);
        }

        .status-text {
            transition: all 0.3s ease;
            width: auto;
            opacity: 1;
        }

        .music-control.collapsed .status-text {
            width: 0;
            overflow: hidden;
            opacity: 0;
        }

        /* 响应式 */
        @media (max-width: 768px) {
            .time {
                font-size: 2em;
            }

            .quote {
                font-size: 1em;
            }

            .user-info-container {
                display: flex;
                align-items: center;
                gap: 20px;
                width: 100%;
                max-width: 800px;
                animation-delay: 0.2s;
                position: relative;
            }

            .sidebar {
                width: 280px;
            }

            .theme-toggle,
            .sidebar-toggle {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
        }

        @media (min-width: 1024px) {
            .container {
                max-width: 1400px;
            }

            .projects-container {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
        }
        /* 评论区样式 */
        #giscus-container {
            margin-top: 20px;
        }

        /* Giscus 主题适配 */
        .giscus, .giscus-frame {
            width: 100%;
        }

        /* 暗色模式下的评论区 */
        body:not(.light-mode) .giscus {
            color-scheme: dark;
        }

        /* 亮色模式下的评论区 */
        body.light-mode .giscus {
            color-scheme: light;
        }
.posts-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.post-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 15px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.post-item:hover {
    transform: translateX(5px);
}

.post-title {
    font-size: 1em;
}

.post-date {
    font-size: 0.8em;
    opacity: 0.6;
}
    </style>
</head>
<body>
    <!-- SVG 滤镜定义 -->
    <svg class="liquid-glass-filter" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <filter id="liquid-glass-filter" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
                <feImage id="liquid-glass-displacement-map" width="100" height="100"></feImage>
                <feDisplacementMap in="SourceGraphic" xChannelSelector="R" yChannelSelector="G" scale="10"></feDisplacementMap>
            </filter>
        </defs>
    </svg>

    <!-- 加载屏 -->
    <div class="loading-container" id="loading-screen">
        <div class="loader"></div>
    </div>

    <!-- 启动页 -->
    <div class="intro-container" id="intro-screen">
        <div class="typing-effect" id="typing-text"></div>
        <span class="cursor" id="cursor"></span>
    </div>

    <!-- 滚动指示器 -->
    <div class="scroll-indicator" id="scroll-indicator"></div>

    <!-- 顶部栏 -->
    <div class="header-bar liquid-glass" id="header-bar">
        <div class="header-name" id="header-name">Gordio</div>
        <img class="header-avatar" id="header-avatar" src="./head.png" alt="头像">
    </div>

    <!-- 主题切换按钮 -->
    <button class="theme-toggle liquid-glass" id="theme-toggle">
        <i class="fas fa-moon"></i>
    </button>

    <!-- 侧边栏按钮 -->
    <button class="sidebar-toggle liquid-glass" id="sidebar-toggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- 侧边栏遮罩 -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- 侧边栏 -->
    <div class="sidebar liquid-glass" id="sidebar">
        <button class="sidebar-close" id="sidebar-close">×</button>
        <img class="sidebar-oc-image" src="./OC.png" alt="Furry OC">
        
        <div class="sidebar-section sidebar-user-info">
            <img class="sidebar-avatar" id="sidebar-avatar" src="./head.png" alt="头像">
            <div class="sidebar-username" id="sidebar-username">Gordio</div>
            <div class="sidebar-bio" id="sidebar-bio">加载中...</div>
        </div>

        <div class="sidebar-section">
            <div class="section-title">GitHub 活动</div>
            <div class="sidebar-timeline" id="github-timeline">
                <div class="skeleton" style="height: 60px; margin-bottom: 10px;"></div>
                <div class="skeleton" style="height: 60px; margin-bottom: 10px;"></div>
                <div class="skeleton" style="height: 60px;"></div>
            </div>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-menu-item" id="view-all-repos">
                <i class="fas fa-star"></i>
                <span>GitHub Stars</span>
            </div>
            <div class="sidebar-menu-item" id="view-all-notes">
                <i class="fas fa-book"></i>
                <span>随记</span>
            </div>
<div class="sidebar-menu-item" onclick="location.href='./blog.html/'">
    <i class="fas fa-pen-nib"></i>
    <span>Blog / 文章</span>
</div>
        </div>

        <div class="sidebar-section">
            <div class="section-title">社交媒体</div>
            <div class="social-links">
                <a href="https://github.com/Gitxhj" target="_blank">
                    <img class="social-icon" src="./github.png" alt="GitHub">
                </a>
                <a href="https://www.coolapk.com/u/星河间v" target="_blank">
                    <img class="social-icon" src="./coolapk.png" alt="酷安">
                </a>
                <a href="https://m.bilibili.com/space/3546662333057074" target="_blank">
                    <img class="social-icon" src="./bilibili.png" alt="Bilibili">
                </a>
            </div>
        </div>
    </div>

    <!-- 音频控件 -->
    <div class="music-control" id="music-control">
        <audio id="background-music" loop>
            <source src="./Audio.mp3" type="audio/mpeg">
        </audio>
        <button class="play-pause-btn liquid-glass" id="play-pause-btn">
            <i class="fas fa-play" id="play-icon"></i>
            <i class="fas fa-pause" id="pause-icon" style="display: none;"></i>
            <span class="status-text">播放</span>
        </button>
    </div>

    <!-- 主内容 -->
    <div class="main-content" id="main-content">
        <div class="container">
            <!-- 时间 -->
            <div class="time-container" id="time-container">
                <div class="time" id="current-time">00:00:00</div>
                <div class="date" id="current-date">2024年1月1日</div>
            </div>

            <!-- 一言 -->
            <div class="glass-card liquid-glass quote" id="hitokoto">加载中...</div>

            <!-- 用户信息 -->
            <div class="glass-card liquid-glass user-info-container" id="user-info-container">
                <div class="avatar-container" id="avatar-container">
                    <img class="avatar" id="main-avatar" src="./head.png" alt="头像">
                </div>
                <div class="user-text-info">
                    <div class="nickname" id="nickname">
                        Gordio
                    </div>
                    <div class="bio-preview" id="bio-preview">加载中...</div>
                </div>
            </div>
<!-- 最近文章 -->
<div class="glass-card liquid-glass" style="width: 100%; max-width: 800px;">
    <div class="section-title">最近文章</div>
    <div class="posts-container" id="posts-container">
        <div class="skeleton skeleton-card"></div>
    </div>
</div>

            <!-- GitHub 仓库（仅显示第一个） -->
            <div class="glass-card liquid-glass" style="width: 100%; max-width: 800px;">
                <div class="section-title">新 GitHub Star</div>
                <div class="repos-container" id="repos-container">
                    <div class="skeleton skeleton-card"></div>
                </div>
            </div>

            <!-- 我的项目 -->
            <div class="glass-card liquid-glass" style="width: 100%; max-width: 800px;">
                <div class="section-title">My Projects</div>
                <div class="projects-container">
                    <a href="https://gitxhj.github.io/DayDrop.github.io/" class="project-card liquid-glass" target="_blank">
                        <div class="project-header">
                            <img class="project-icon" src="https://gitxhj.github.io/DayDrop.github.io/favicon.png" alt="DayDrop">
                            <div class="project-name">DayDrop</div>
                        </div>
                        <div class="repo-description">让每一个重要时刻都不再被忽略</div>
                    </a>
                    <a href="./perdev.html" class="project-card liquid-glass" target="_blank">
                        <div class="project-header">
                            <img class="project-icon" src="./perdev.png" alt="PerDev">
                            <div class="project-name">PerDev</div>
                        </div>
                        <div class="repo-description">Personal Developer</div>
                    </a>
                </div>
            </div>

            <!-- 随记（仅显示第一个） -->
            <div class="glass-card liquid-glass" style="width: 100%; max-width: 800px;">
                <div class="section-title">最近随记</div>
                <div class="notes-container" id="notes-container">
                    <div class="skeleton skeleton-card"></div>
                </div>
            </div>

            <!-- 评论区 -->
            <div class="glass-card liquid-glass" style="width: 100%; max-width: 800px;">
                <div class="section-title">留言板</div>
                <div id="giscus-container"></div>
            </div>
        </div>
    </div>

    <!-- 模态框 -->
    <div class="modal" id="note-modal">
        <button class="modal-close" id="modal-close">×</button>
        <div class="modal-content liquid-glass" id="modal-content"></div>
    </div>

    <!-- 全部仓库模态框 -->
    <div class="modal" id="all-repos-modal">
        <button class="modal-close" id="repos-modal-close">×</button>
        <div class="modal-content liquid-glass" id="all-repos-content">
            <div class="modal-title">全部 GitHub Stars</div>
            <div class="all-items-list" id="all-repos-list"></div>
        </div>
    </div>

    <!-- 全部随记模态框 -->
    <div class="modal" id="all-notes-modal">
        <button class="modal-close" id="notes-modal-close">×</button>
        <div class="modal-content liquid-glass" id="all-notes-content">
            <div class="modal-title">全部随记</div>
            <div class="all-items-list" id="all-notes-list"></div>
        </div>
    </div>

    <script>
        // 全局变量
        let hitokotoText = "";
        let welcomeText = "欢迎来到我的小站";
        let isTypingHitokoto = true;
        let charIndex = 0;
        let isIntroComplete = false;
        let isPlaying = false;
        let useOldVersion = localStorage.getItem('useOldVersion') === 'true';
        let isFirstVisit = !localStorage.getItem('hasSeenIntro');
        let isDarkMode = localStorage.getItem('theme') === 'dark';
        let clickCount = 0;
        let clickTimer = null;
        let allRepos = [];
        let allNotes = [];

        // DOM 元素
        const loadingScreen = document.getElementById('loading-screen');
        const introScreen = document.getElementById('intro-screen');
        const typingTextElement = document.getElementById('typing-text');
        const headerBar = document.getElementById('header-bar');
        const scrollIndicator = document.getElementById('scroll-indicator');
        const mainContent = document.getElementById('main-content');
        const backgroundMusic = document.getElementById('background-music');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');
        const statusText = document.querySelector('.status-text');
        const themeToggle = document.getElementById('theme-toggle');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        const sidebarClose = document.getElementById('sidebar-close');
        const timeContainer = document.getElementById('time-container');
        const avatarContainer = document.getElementById('avatar-container');
        const nickname = document.getElementById('nickname');

        // 液态玻璃效果
        class LiquidGlassEffect {
            constructor() {
                this.canvas = document.createElement('canvas');
                this.context = this.canvas.getContext('2d');
                this.width = 100;
                this.height = 100;
                this.canvas.width = this.width;
                this.canvas.height = this.height;
                this.updateDisplacementMap();
            }

            smoothStep(a, b, t) {
                t = Math.max(0, Math.min(1, (t - a) / (b - a)));
                return t * t * (3 - 2 * t);
            }

            length(x, y) {
                return Math.sqrt(x * x + y * y);
            }

            roundedRectSDF(x, y, width, height, radius) {
                const qx = Math.abs(x) - width + radius;
                const qy = Math.abs(y) - height + radius;
                return Math.min(Math.max(qx, qy), 0) + this.length(Math.max(qx, 0), Math.max(qy, 0)) - radius;
            }

            updateDisplacementMap() {
                const data = new Uint8ClampedArray(this.width * this.height * 4);
                let maxScale = 0;
                const rawValues = [];

                for (let i = 0; i < data.length; i += 4) {
                    const x = (i / 4) % this.width;
                    const y = Math.floor(i / 4 / this.width);
                    const uv = { x: x / this.width, y: y / this.height };
                    
                    const ix = uv.x - 0.5;
                    const iy = uv.y - 0.5;
                    const distanceToEdge = this.roundedRectSDF(ix, iy, 0.3, 0.2, 0.6);
                    const displacement = this.smoothStep(0.8, 0, distanceToEdge - 0.15);
                    const scaled = this.smoothStep(0, 1, displacement);
                    
                    const dx = (ix * scaled + 0.5) * this.width - x;
                    const dy = (iy * scaled + 0.5) * this.height - y;
                    
                    maxScale = Math.max(maxScale, Math.abs(dx), Math.abs(dy));
                    rawValues.push(dx, dy);
                }

                maxScale *= 0.5;
                let index = 0;
                
                for (let i = 0; i < data.length; i += 4) {
                    const r = rawValues[index++] / maxScale + 0.5;
                    const g = rawValues[index++] / maxScale + 0.5;
                    data[i] = r * 255;
                    data[i + 1] = g * 255;
                    data[i + 2] = 0;
                    data[i + 3] = 255;
                }

                this.context.putImageData(new ImageData(data, this.width, this.height), 0, 0);
                
                const feImage = document.getElementById('liquid-glass-displacement-map');
                if (feImage) {
                    feImage.setAttributeNS('http://www.w3.org/1999/xlink', 'href', this.canvas.toDataURL());
                }
            }
        }

        // 初始化液态玻璃效果
        const liquidGlass = new LiquidGlassEffect();

        // 获取当前头像
        function getCurrentAvatar() {
            const now = new Date();
            const shanghaiTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Shanghai' }));
            const month = shanghaiTime.getMonth() + 1;
            const date = shanghaiTime.getDate();
            const hour = shanghaiTime.getHours();
            
            if (month === 12 && date === 24 && hour >= 19) {
                return './Head-Furry/ChristmasEve.png';
            }
            if (month === 12 && date === 25) {
                return './Head-Furry/Christmas.png';
            }
            if (month === 10 && date === 30 && hour >= 19) {
                return './Head-Furry/HalloweenEve.png';
            }
            if (month === 10 && date === 31) {
                return './Head-Furry/Halloween.png';
            }
            if (hour >= 19 || hour < 7) {
                return './Head-Furry/normal-dark.png';
            } else {
                return './Head-Furry/normal-light.png';
            }
        }

        // 应用主题
        function applyTheme() {
            if (isDarkMode) {
                document.body.classList.add('light-mode');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                document.body.classList.remove('light-mode');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        }

        // 切换主题
        themeToggle.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            applyTheme();
        });

        // 更新头像
        function updateAvatar() {
            const avatarPath = useOldVersion ? './head.png' : getCurrentAvatar();
            document.getElementById('header-avatar').src = avatarPath;
            document.getElementById('main-avatar').src = avatarPath;
            document.getElementById('sidebar-avatar').src = avatarPath;
            
            const userName = useOldVersion ? '星河间' : 'Gordio';
            document.getElementById('header-name').textContent = userName;
            
            if (useOldVersion) {
                nickname.innerHTML = '星河间<span class="old-version-label">(旧版)</span>';
            } else {
                nickname.textContent = 'Gordio';
            }
            document.getElementById('sidebar-username').textContent = userName;
        }

        // 切换版本
        function toggleVersion() {
            useOldVersion = !useOldVersion;
            localStorage.setItem('useOldVersion', useOldVersion);
            updateAvatar();
        }

        // 头像和昵称点击事件
        avatarContainer.addEventListener('click', toggleVersion);
        nickname.addEventListener('click', toggleVersion);
        document.getElementById('sidebar-avatar').addEventListener('click', toggleVersion);

        // 首次访问提示
        if (isFirstVisit) {
            const hint = document.createElement('div');
            hint.className = 'version-switch-hint';
            hint.textContent = '点击可切换旧版/新版';
            document.getElementById('user-info-container').appendChild(hint);
        }

        // 侧边栏
        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.add('open');
            sidebarOverlay.classList.add('active');
        });

        sidebarClose.addEventListener('click', () => {
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('active');
        });

        sidebarOverlay.addEventListener('click', () => {
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('active');
        });

        // 时钟点击
        timeContainer.addEventListener('click', () => {
            clickCount++;
            
            if (clickCount === 1) {
                timeContainer.classList.add('enlarged');
                clickTimer = setTimeout(() => {
                    clickCount = 0;
                    timeContainer.classList.remove('enlarged');
                }, 500);
            } else if (clickCount === 2) {
                clearTimeout(clickTimer);
                window.location.href = './clock.html';
            }
        });

        timeContainer.addEventListener('mouseleave', () => {
            timeContainer.classList.remove('enlarged');
            clickCount = 0;
            if (clickTimer) clearTimeout(clickTimer);
        });

        // 获取一言
        async function fetchHitokoto() {
            try {
                const response = await fetch('https://v1.hitokoto.cn/');
                const data = await response.json();
                hitokotoText = data.hitokoto;
                document.querySelector('#hitokoto').textContent = hitokotoText;
            } catch (error) {
                console.error('获取一言失败:', error);
                hitokotoText = '生活不止眼前的苟且,还有诗和远方的田野。';
                document.querySelector('#hitokoto').textContent = hitokotoText;
            }
        }

        // 加载简介
        async function loadAbout() {
            try {
                const response = await fetch('/Text/about.json');
                const data = await response.json();
                const fullBio = data.about;
                document.getElementById('sidebar-bio').textContent = fullBio;
                document.getElementById('bio-preview').textContent = fullBio.substring(0, 30) + '...';
            } catch (error) {
                console.error('加载简介失败:', error);
                document.getElementById('sidebar-bio').textContent = '暂无简介';
                document.getElementById('bio-preview').textContent = '暂无简介';
            }
        }

        // 加载 GitHub 仓库（仅显示第一个）
        async function loadGitHubRepos() {
            try {
                const response = await fetch('https://api.github.com/users/Gitxhj/starred');
                const repos = await response.json();
                allRepos = repos;
                const container = document.getElementById('repos-container');
                container.innerHTML = '';
                
// 显示前 3 个
const topRepos = repos.slice(0, 3);

topRepos.forEach((repo, index) => {
    const card = createRepoCard(repo, index);
    container.appendChild(card);
});
            } catch (error) {
                console.error('加载 GitHub 仓库失败:', error);
                document.getElementById('repos-container').innerHTML = '<div class="error-message">无法加载 GitHub 仓库</div>';
            }
        }

        // 创建仓库卡片
        function createRepoCard(repo, index) {
            const card = document.createElement('a');
            card.className = 'repo-card liquid-glass';
            card.href = repo.html_url;
            card.target = '_blank';
            card.style.animationDelay = `${0.4 + index * 0.1}s`;
            
            card.innerHTML = `
                <div class="repo-header">
                    <svg class="repo-icon" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M2 2.5A2.5 2.5 0 014.5 0h8.75a.75.75 0 01.75.75v12.5a.75.75 0 01-.75.75h-2.5a.75.75 0 110-1.5h1.75v-2h-8a1 1 0 00-.714 1.7.75.75 0 01-1.072 1.05A2.495 2.495 0 012 11.5v-9zm10.5-1V9h-8c-.356 0-.694.074-1 .208V2.5a1 1 0 011-1h8zM5 12.25v3.25a.25.25 0 00.4.2l1.45-1.087a.25.25 0 01.3 0L8.6 15.7a.25.25 0 00.4-.2v-3.25a.25.25 0 00-.25-.25h-3.5a.25.25 0 00-.25.25z"></path>
                    </svg>
                    <div class="repo-name">${repo.name}</div>
                </div>
                <div class="repo-description">${repo.description || '无描述'}</div>
                <div class="repo-stats">
                    <span>⭐ ${repo.stargazers_count}</span>
                </div>
            `;
            
            return card;
        }

        // 显示全部仓库
        function showAllRepos() {
            const modal = document.getElementById('all-repos-modal');
            const list = document.getElementById('all-repos-list');
            list.innerHTML = '';
            
            allRepos.forEach((repo, index) => {
                const card = createRepoCard(repo, index);
                list.appendChild(card);
            });
            
            modal.classList.add('active');
        }

        // 加载 GitHub 活动（仅显示前5个）
        async function loadGitHubActivity() {
            try {
                const response = await fetch('https://api.github.com/users/Gitxhj/events/public');
                const events = await response.json();
                const timeline = document.getElementById('github-timeline');
                timeline.innerHTML = '';
                
                const filteredEvents = events.filter(e => 
                    ['PushEvent', 'CreateEvent', 'ForkEvent', 'WatchEvent'].includes(e.type)
                ).slice(0, 5);
                
                filteredEvents.forEach(event => {
                    const item = document.createElement('div');
                    item.className = 'timeline-item';
                    
                    let action = '';
                    if (event.type === 'PushEvent') {
                        action = `推送到 ${event.repo.name}`;
                    } else if (event.type === 'CreateEvent') {
                        action = `创建了 ${event.repo.name}`;
                    } else if (event.type === 'ForkEvent') {
                        action = `Fork 了 ${event.repo.name}`;
                    } else if (event.type === 'WatchEvent') {
                        action = `星标了 ${event.repo.name}`;
                    }
                    
                    const timeAgo = getTimeAgo(new Date(event.created_at));
                    
                    item.innerHTML = `
                        <div class="timeline-icon">●</div>
                        <div class="timeline-content">
                            <div class="timeline-action">${action}</div>
                            <div class="timeline-time">${timeAgo}</div>
                        </div>
                    `;
                    
                    timeline.appendChild(item);
                });
            } catch (error) {
                console.error('加载 GitHub 活动失败:', error);
                document.getElementById('github-timeline').innerHTML = '<div class="error-message">无法加载活动</div>';
            }
        }

        // 时间转换
        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            const intervals = {
                年: 31536000,
                月: 2592000,
                周: 604800,
                天: 86400,
                小时: 3600,
                分钟: 60
            };
            
            for (let [name, value] of Object.entries(intervals)) {
                const interval = Math.floor(seconds / value);
                if (interval >= 1) {
                    return `${interval} ${name}前`;
                }
            }
            return '刚刚';
        }

        // 加载随记（仅显示第一个）
        async function loadNotes() {
            try {
                const response = await fetch('/Text/note.json');
                const data = await response.json();
                allNotes = data.notes;
                const container = document.getElementById('notes-container');
                container.innerHTML = '';
                
                // 仅显示第一个
                if (allNotes.length > 0) {
                    const note = allNotes[0];
                    const card = createNoteCard(note, 0);
                    container.appendChild(card);
                }
            } catch (error) {
                console.error('加载随记失败:', error);
                document.getElementById('notes-container').innerHTML = '<div class="error-message">无法加载随记</div>';
            }
        }

        // 创建随记卡片
        function createNoteCard(note, index) {
            const card = document.createElement('div');
            card.className = 'note-card liquid-glass';
            card.style.animationDelay = `${0.5 + index * 0.1}s`;
            
            card.innerHTML = `
                <div class="note-header">
                    <div class="note-title">${note.title}</div>
                </div>
                <div class="note-preview">${note.content.substring(0, 50)}...</div>
                ${note.imageUrl ? `<img class="note-image" src="${note.imageUrl}" alt="${note.title}">` : ''}
                <div class="note-date">${note.date}</div>
            `;
            
            card.addEventListener('click', () => showNoteModal(note));
            return card;
        }

        // 显示全部随记
        function showAllNotes() {
            const modal = document.getElementById('all-notes-modal');
            const list = document.getElementById('all-notes-list');
            list.innerHTML = '';
            
            allNotes.forEach((note, index) => {
                const card = createNoteCard(note, index);
                list.appendChild(card);
            });
            
            modal.classList.add('active');
        }

        // 用户信息卡片自动移动到侧边栏
        function startUserInfoAnimation() {
            const userInfoContainer = document.getElementById('user-info-container');
            if (userInfoContainer) {
                setTimeout(() => {
                    userInfoContainer.classList.add('auto-hide');
                }, 5500);
            }
        }
// 加载最近文章
async function loadPosts() {
    try {
        const response = await fetch('./posts.json');
        const posts = await response.json();
        const container = document.getElementById('posts-container');
        container.innerHTML = '';

        // 只显示前 3 个
        const latestPosts = posts.slice(0, 3);

        latestPosts.forEach(post => {
            const item = document.createElement('div');
            item.className = 'post-item liquid-glass';

            const date = new Date(post.date);
            const formattedDate = date.toLocaleDateString('zh-CN');

            item.innerHTML = `
                <div class="post-title">${post.title}</div>
                <div class="post-date">${formattedDate}</div>
            `;

            item.addEventListener('click', () => {
                window.location.href = post.path;
            });

            container.appendChild(item);
        });

    } catch (error) {
        console.error('加载文章失败:', error);
        document.getElementById('posts-container').innerHTML =
            '<div class="error-message">无法加载文章</div>';
    }
}

        // 加载 Giscus 评论系统
        function loadGiscus() {
            const script = document.createElement('script');
            script.src = 'https://giscus.app/client.js';
            script.setAttribute('data-repo', 'GitXhj/gitxhj.github.io');
            script.setAttribute('data-repo-id', 'R_kgDONxRKaQ');
            script.setAttribute('data-category', 'General');
            script.setAttribute('data-category-id', 'DIC_kwDONxRKac4C0J54');
            script.setAttribute('data-mapping', 'pathname');
            script.setAttribute('data-strict', '0');
            script.setAttribute('data-reactions-enabled', '1');
            script.setAttribute('data-emit-metadata', '0');
            script.setAttribute('data-input-position', 'top');
            script.setAttribute('data-theme', isDarkMode ? 'dark' : 'light');
            script.setAttribute('data-lang', 'zh-CN');
            script.setAttribute('data-loading', 'lazy');
            script.crossOrigin = 'anonymous';
            script.async = true;

            document.getElementById('giscus-container').appendChild(script);
        }

        // 主题切换时更新 Giscus 主题
        themeToggle.addEventListener('click', () => {
            setTimeout(() => {
                const iframe = document.querySelector('iframe.giscus-frame');
                if (iframe) {
                    const theme = isDarkMode ? 'dark' : 'light';
                    iframe.contentWindow.postMessage(
                        { giscus: { setConfig: { theme } } },
                        'https://giscus.app'
                    );
                }
            }, 100);
        });

        // 显示随记模态框
        function showNoteModal(note) {
            const modal = document.getElementById('note-modal');
            const content = document.getElementById('modal-content');
            
            content.innerHTML = `
                <div class="modal-title">${note.title}</div>
                ${note.imageUrl ? `<img class="modal-image" src="${note.imageUrl}" alt="${note.title}">` : ''}
                <div class="modal-text">${note.content}</div>
                <div class="modal-date">${note.date}</div>
            `;
            
            modal.classList.add('active');
        }

        // 关闭模态框
        document.getElementById('modal-close').addEventListener('click', () => {
            document.getElementById('note-modal').classList.remove('active');
        });

        document.getElementById('note-modal').addEventListener('click', (e) => {
            if (e.target.id === 'note-modal') {
                document.getElementById('note-modal').classList.remove('active');
            }
        });

        document.getElementById('repos-modal-close').addEventListener('click', () => {
            document.getElementById('all-repos-modal').classList.remove('active');
        });

        document.getElementById('all-repos-modal').addEventListener('click', (e) => {
            if (e.target.id === 'all-repos-modal') {
                document.getElementById('all-repos-modal').classList.remove('active');
            }
        });

        document.getElementById('notes-modal-close').addEventListener('click', () => {
            document.getElementById('all-notes-modal').classList.remove('active');
        });

        document.getElementById('all-notes-modal').addEventListener('click', (e) => {
            if (e.target.id === 'all-notes-modal') {
                document.getElementById('all-notes-modal').classList.remove('active');
            }
        });

        // 侧边栏菜单点击事件
        document.getElementById('view-all-repos').addEventListener('click', () => {
            showAllRepos();
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('active');
        });

        document.getElementById('view-all-notes').addEventListener('click', () => {
            showAllNotes();
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('active');
        });

        // 更新时间
        function updateTime() {
            const now = new Date();
            const shanghaiTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Shanghai' }));
            
            document.getElementById('current-time').textContent = shanghaiTime.toLocaleTimeString('zh-CN');
            document.getElementById('current-date').textContent = shanghaiTime.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

        // 音频控制
        function togglePlay() {
            if (isPlaying) {
                backgroundMusic.pause();
            } else {
                backgroundMusic.play();
            }
            updatePlayStatus();
        }

        function updatePlayStatus() {
            isPlaying = !backgroundMusic.paused;
            playIcon.style.display = isPlaying ? 'none' : 'inline';
            pauseIcon.style.display = isPlaying ? 'inline' : 'none';
            statusText.textContent = isPlaying ? '正在播放' : '播放';
        }

        playPauseBtn.addEventListener('click', togglePlay);
        backgroundMusic.addEventListener('playing', updatePlayStatus);
        backgroundMusic.addEventListener('pause', updatePlayStatus);

        // 音频控件折叠
        const musicControl = document.getElementById('music-control');
        let collapseTimeout;

        function startCollapseTimer() {
            clearTimeout(collapseTimeout);
            collapseTimeout = setTimeout(() => {
                musicControl.classList.add('collapsed');
            }, 3000);
        }

        musicControl.addEventListener('click', () => {
            if (musicControl.classList.contains('collapsed')) {
                musicControl.classList.remove('collapsed');
                startCollapseTimer();
            }
        });

        musicControl.addEventListener('mouseenter', () => {
            clearTimeout(collapseTimeout);
            musicControl.classList.remove('collapsed');
        });

        musicControl.addEventListener('mouseleave', startCollapseTimer);

        // 打字效果
        function startTypingEffect() {
            if (isTypingHitokoto) {
                if (charIndex < hitokotoText.length) {
                    typingTextElement.textContent += hitokotoText.charAt(charIndex);
                    charIndex++;
                    setTimeout(startTypingEffect, 100);
                } else {
                    setTimeout(deleteTypingEffect, 3000);
                }
            } else {
                if (charIndex < welcomeText.length) {
                    typingTextElement.textContent += welcomeText.charAt(charIndex);
                    charIndex++;
                    setTimeout(startTypingEffect, 100);
                } else {
                    setTimeout(() => {
                        introScreen.style.backgroundColor = 'transparent';
                        scrollIndicator.style.opacity = '1';
                        setupScrollTrigger();
                        isIntroComplete = true;
                    }, 2000);
                }
            }
        }

        function deleteTypingEffect() {
            if (typingTextElement.textContent.length > 0) {
                typingTextElement.textContent = typingTextElement.textContent.slice(0, -1);
                setTimeout(deleteTypingEffect, 50);
            } else {
                isTypingHitokoto = false;
                charIndex = 0;
                startTypingEffect();
            }
        }

        // 滚动触发
        function setupScrollTrigger() {
            let touchStartY = 0;
            
            document.addEventListener('touchstart', (e) => {
                touchStartY = e.touches[0].clientY;
            });
            
            document.addEventListener('touchmove', (e) => {
                if (!isIntroComplete) return;
                const diff = touchStartY - e.touches[0].clientY;
                if (diff > 50) showMainContent();
            });
            
            document.addEventListener('wheel', (e) => {
                if (!isIntroComplete) return;
                if (e.deltaY > 0) showMainContent();
            });

            introScreen.addEventListener('click', () => {
                if (isIntroComplete) showMainContent();
            });
        }

        // 显示主内容
        function showMainContent() {
            introScreen.style.opacity = '0';
            scrollIndicator.style.opacity = '0';
            headerBar.classList.remove('hidden');

            setTimeout(() => {
                introScreen.style.display = 'none';
                scrollIndicator.style.display = 'none';
                mainContent.style.transform = 'translateY(0)';
                localStorage.setItem('hasSeenIntro', 'true');

                setTimeout(() => {
                    headerBar.classList.add('hidden');
                }, 1000);

                backgroundMusic.play().catch(() => {});
                startCollapseTimer();
            }, 500);
        }

        // 初始化
        window.addEventListener('load', async () => {
loadPosts();
            updateAvatar();
            applyTheme();
            
            await fetchHitokoto();
            await loadAbout();
            
            setTimeout(() => {
                loadingScreen.style.opacity = '0';
                setTimeout(() => {
                    loadingScreen.style.display = 'none';
                    headerBar.classList.remove('hidden');
                    
                    if (localStorage.getItem('hasSeenIntro')) {
                        introScreen.style.display = 'none';
                        scrollIndicator.style.display = 'none';
                        mainContent.style.transform = 'translateY(0)';
                        isIntroComplete = true;
                        
                        setTimeout(() => {
                            headerBar.classList.add('hidden');
                        }, 1000);
                        
                        loadGitHubRepos();
                        loadGitHubActivity();
                        loadNotes();
                        startUserInfoAnimation();  
                        loadGiscus(); 
                    } else {
                        introScreen.style.opacity = '1';
                        startTypingEffect();
                    }
                }, 500);
            }, 1000);
        });

        // 定时器
        setInterval(updateTime, 1000);
        setInterval(() => {
            updateAvatar();
        }, 60000);
        
        updateTime();
    </script>
</body>
</html>
